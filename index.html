<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fitness Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>body { background-color: #dbdfdf; }</style>
</head>
<body>
  <script>
    const user = JSON.parse(localStorage.getItem('fitnessUser'));
    if (!user) window.location.href = 'login.html';
  </script>

  <header class="header-bg text-white text-center py-4">
    <h1><i class="fas fa-dumbbell bounce-icon"></i> Fitness Tracker</h1>
    <nav class="mt-3">
      <a href="#progress" class="text-white mx-3">Progress</a>
      <a href="#graphics" class="text-white mx-3">Graphics</a>
      <a href="#workout" class="text-white mx-3">Log Workout</a>
      <a href="dietpage.html" class="text-white mx-3">Diet</a>
      <a href="weekly.html" class="text-white mx-3">Weekly</a>
      <a href="login.html" class="text-white mx-3">Login</a>
      <a href="signup.html" class="text-white mx-3">Sign Up</a>
    </nav>
    <p class="mt-2">Welcome, <span id="userDisplay" class="fw-bold"></span> ðŸ‘‹</p>
  </header>

  <main class="container my-5">
    <section id="gallery" class="mb-5">
      <h2 class="text-success text-center mb-4">Workout Information</h2>
      <div class="row g-4 justify-content-center">
        <div class="col-md-3">
          <div class="img-card">
            <img src="https://i0.wp.com/www.muscleandfitness.com/wp-content/uploads/2018/01/One-Arm-Dumbbell-Row-1109.jpg" alt="Workout 1" />
            <div class="p-3 text-center">
              <a href="info1.html" class="btn btn-outline-primary">More Information</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="img-card">
            <img src="https://his.gov.tr/uploads/his-blog/yoga-2.jpg" alt="Yoga" />
            <div class="p-3 text-center">
              <a href="info2.html" class="btn btn-outline-primary">More Information</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="img-card">
            <img src="https://www.endomondo.com/wp-content/uploads/2024/02/best-cardio-for-weight-loss-img.jpg" alt="Cardio" />
            <div class="p-3 text-center">
              <a href="info3.html" class="btn btn-outline-primary">More Information</a>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="img-card">
            <img src="https://i0.wp.com/www.muscleandfitness.com/wp-content/uploads/2019/09/Shirtless-Man-Beard-Battle-Ropes-Smokey-Gym.jpg" alt="Battle Ropes" />
            <div class="p-3 text-center">
              <a href="info4.html" class="btn btn-outline-primary">More Information</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="progress" class="bg-white p-4 rounded shadow text-center mb-5">
      <h2>Today's Progress</h2>
      <p id="progress-workout">Workout Type: <strong>â€”</strong></p>
      <p id="progress-duration">Duration: <strong>â€”</strong></p>
      <p id="progress-gender">Gender: <strong>â€”</strong></p>
      <p id="progress-age">Age: <strong>â€”</strong></p>
      <p id="progress-calories">Calories Burned: <strong>â€”</strong></p>
    </section>

    <section id="workout" class="bg-white p-4 rounded shadow mb-5">
      <h2 class="text-center mb-4">Customize Your Workout</h2>
      <form id="workoutForm">
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Workout Type</label>
            <select id="type" class="form-select" required>
              <option value="">Select</option>
              <option>Dumbbell Row</option>
              <option>Yoga</option>
              <option>Cardio</option>
              <option>Battle Ropes</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Duration (min)</label>
            <input type="number" id="duration" class="form-control" required min="1" />
          </div>
          <div class="col-md-6">
            <label class="form-label">Gender</label>
            <select id="gender" class="form-select" required>
              <option value="">Select</option>
              <option>Male</option>
              <option>Female</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Age</label>
            <input type="number" id="age" class="form-control" required min="1" />
          </div>
        </div>
        <div class="text-center mt-4">
          <button type="submit" class="btn btn-primary px-4">Submit</button>
        </div>
      </form>

      <div id="graphics" class="mt-5 text-center">
        <h3 class="mb-4">Workout Summary Chart</h3>
        <canvas id="workoutChart" style="width: 100%; max-width: 700px; height: 400px; margin: 0 auto;"></canvas>
      </div>
    </section>

    <section id="about" class="bg-light p-4 rounded shadow d-flex flex-column flex-md-row align-items-center">
      <img src="https://png.pngtree.com/element_our/sm/20171221/sm_5a3c024294ff5.jpg" alt="About" class="img-fluid" style="max-width: 300px; border-radius: 12px;" />
      <div class="ms-md-4 mt-4 mt-md-0">
        <h2>About Us</h2>
        <p>
          At Fitness Tracker, our goal is to help you build healthy habits by tracking your daily workouts and progress.
          We aim to motivate you to reach your fitness goals with easy-to-use tools and personalized feedback.
          Join our community and take the next step toward a healthier, stronger you!
        </p>
      </div>
    </section>
  </main>

  <footer class="bg-light text-center text-muted py-4">
    <p class="mb-1">&copy; 2025 Fitness Tracker. All rights reserved.</p>
    <div class="mb-2">
      <a href="#" class="text-muted me-2">Privacy Policy</a> |
      <a href="#" class="text-muted ms-2">Top to Page</a>
    </div>
    <div>
      <a href="mailto:yesra8572@gmail.com" class="text-muted me-3">
        <i class="fa fa-envelope"></i> samuelroyjojo2711@gmail.com
      </a>
      <a href="tel:+905555555555" class="text-muted">
        <i class="fa fa-phone"></i> +1 289 834 0661
      </a>
    </div>
    <div class="mt-2">
      <a href="https://facebook.com" class="text-primary me-3"><i class="fab fa-facebook"></i></a>
      <a href="https://twitter.com" class="text-info me-3"><i class="fab fa-twitter"></i></a>
      <a href="https://instagram.com" class="text-danger"><i class="fab fa-instagram"></i></a>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    if (user && user.username) {
      document.getElementById("userDisplay").textContent = user.username;
    }

    let workoutChart;
    const MET_VALUES = {
      "Dumbbell Row": 6,
      "Yoga": 3,
      "Cardio": 8,
      "Battle Ropes": 10
    };

    document.getElementById("workoutForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const type = document.getElementById("type").value;
      const duration = parseInt(document.getElementById("duration").value);
      const gender = document.getElementById("gender").value;
      const age = parseInt(document.getElementById("age").value);

      const met = MET_VALUES[type] || 5;
      const weight = gender === "Male" ? age * 1.1 : age * 1.0;
      const hours = duration / 60;
      const caloriesBurned = Math.round(met * weight * hours);
      const loseWeightTarget = caloriesBurned + 300;
      const gainMuscleTarget = Math.max(0, caloriesBurned - 150);

      const workoutData = { type, duration, gender, age, caloriesBurned };
      localStorage.setItem("userWorkout", JSON.stringify(workoutData));

      document.getElementById("progress-workout").innerHTML = `Workout Type: <strong>${type}</strong>`;
      document.getElementById("progress-duration").innerHTML = `Duration: <strong>${duration} min</strong>`;
      document.getElementById("progress-gender").innerHTML = `Gender: <strong>${gender}</strong>`;
      document.getElementById("progress-age").innerHTML = `Age: <strong>${age}</strong>`;
      document.getElementById("progress-calories").innerHTML = `Calories Burned: <strong>${caloriesBurned} kcal</strong>`;

      const ctx = document.getElementById("workoutChart").getContext("2d");
      if (workoutChart) {
        workoutChart.data.datasets[0].data = [caloriesBurned, loseWeightTarget, gainMuscleTarget];
        workoutChart.update();
      } else {
        workoutChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Burned", "Target (Lose Wt)", "Target (Muscle Gain)"],
            datasets: [{
              label: "Calories (kcal)",
              backgroundColor: ["#36a2eb", "#ffc107", "#4caf50"],
              data: [caloriesBurned, loseWeightTarget, gainMuscleTarget]
            }]
          },
          options: {
            responsive: true,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return `${context.label}: ${context.formattedValue} kcal`;
                  }
                }
              }
            },
            scales: { y: { beginAtZero: true } }
          }
        });
      }
    });
  </script>
</body>
</html>
